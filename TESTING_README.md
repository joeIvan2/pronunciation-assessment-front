# ç™¼éŸ³è©•ä¼°æ‡‰ç”¨ç¨‹å¼ - è‡ªå‹•åŒ–æ¸¬è©¦èªªæ˜

## æ¦‚è¿°
æœ¬æ¸¬è©¦å¥—ä»¶ä½¿ç”¨ Playwright é€²è¡Œç«¯åˆ°ç«¯ (E2E) è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œç¢ºä¿ç™¼éŸ³è©•ä¼°æ‡‰ç”¨ç¨‹å¼çš„æ‰€æœ‰åŠŸèƒ½æ­£å¸¸é‹ä½œã€‚

## æ¸¬è©¦æ–‡ä»¶çµæ§‹
```
â”œâ”€â”€ TEST_GUIDE.md           # å®Œæ•´åŠŸèƒ½æ¸¬è©¦æŒ‡å—
â”œâ”€â”€ playwright-test.js      # ä¸»è¦è‡ªå‹•åŒ–æ¸¬è©¦è…³æœ¬
â”œâ”€â”€ playwright.config.js    # Playwright é…ç½®æ–‡ä»¶
â”œâ”€â”€ run-tests.ps1          # Windows PowerShell åŸ·è¡Œè…³æœ¬
â”œâ”€â”€ test-package.json      # æ¸¬è©¦å°ˆç”¨ package.json
â””â”€â”€ TESTING_README.md      # æœ¬èªªæ˜æ–‡ä»¶
```

## å¿«é€Ÿé–‹å§‹

### 1. ç’°å¢ƒæº–å‚™
ç¢ºä¿æ‚¨çš„ç³»çµ±å·²å®‰è£ï¼š
- Node.js (v14.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬)
- npm æˆ– yarn
- Windows PowerShell (Windows ç³»çµ±)

### 2. å®‰è£æ¸¬è©¦ä¾è³´
```bash
# å®‰è£ Playwright
npm install playwright

# å®‰è£ç€è¦½å™¨
npx playwright install
```

### 3. å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
åœ¨å¦ä¸€å€‹çµ‚ç«¯è¦–çª—ä¸­ï¼š
```bash
npm start
```
ç¢ºä¿æ‡‰ç”¨ç¨‹å¼é‹è¡Œåœ¨ `http://localhost:3000`

### 4. åŸ·è¡Œæ¸¬è©¦

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ PowerShell è…³æœ¬ï¼ˆæ¨è–¦ï¼‰
```powershell
.\run-tests.ps1
```

#### æ–¹æ³•äºŒï¼šç›´æ¥åŸ·è¡Œæ¸¬è©¦
```bash
node playwright-test.js
```

#### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ npm è…³æœ¬
```bash
# è¤‡è£½ test-package.json ç‚º package.json
cp test-package.json package.json

# åŸ·è¡Œæ¸¬è©¦
npm test
```

## æ¸¬è©¦æ¶µè“‹ç¯„åœ

### æ ¸å¿ƒåŠŸèƒ½æ¸¬è©¦
- [x] æ‡‰ç”¨ç¨‹å¼å•Ÿå‹•å’Œè¼‰å…¥
- [x] é é¢æ¨™é¡Œé©—è­‰
- [x] ç™¼éŸ³è©•åˆ†é é¢åŠŸèƒ½
- [x] æ–‡å­—è¼¸å…¥å’Œç·¨è¼¯
- [x] å¥å­åº«é¸æ“‡
- [x] æ¨™ç±¤éæ¿¾åŠŸèƒ½
- [x] å´é‚Šæ¬„åŠŸèƒ½ï¼ˆæˆ‘çš„æœ€æ„›ã€ç™¼éŸ³æ­·å²ç­‰ï¼‰
- [x] æ•¸æ“šåˆ†äº«åŠŸèƒ½
- [x] AI åŠ©ç†åŠŸèƒ½
- [x] Firebase ç™»å…¥åŠŸèƒ½

### æŠ€è¡“æ¸¬è©¦
- [x] éŸ¿æ‡‰å¼è¨­è¨ˆï¼ˆæ¡Œé¢ã€å¹³æ¿ã€æ‰‹æ©Ÿï¼‰
- [x] è·¨ç€è¦½å™¨å…¼å®¹æ€§
- [x] æ€§èƒ½æ¸¬è©¦
- [x] éŒ¯èª¤è™•ç†

## æ¸¬è©¦çµæœ

### è¼¸å‡ºæ–‡ä»¶
æ¸¬è©¦å®Œæˆå¾Œæœƒç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š
- `test-report.md` - è©³ç´°æ¸¬è©¦å ±å‘Š
- `test-results.png` - æ‡‰ç”¨ç¨‹å¼æˆªåœ–
- `test-results/` - æ¸¬è©¦çµæœç›®éŒ„ï¼ˆå¦‚æœä½¿ç”¨ Playwright Test Runnerï¼‰

### æ¸¬è©¦ç‹€æ…‹æŒ‡ç¤º
- âœ… æ¸¬è©¦é€šé
- âŒ æ¸¬è©¦å¤±æ•—
- âš ï¸ æ¸¬è©¦è­¦å‘Š
- ğŸ“‹ æ¸¬è©¦æ­¥é©Ÿ
- ğŸ‰ æ¸¬è©¦å®Œæˆ

## è‡ªå®šç¾©æ¸¬è©¦

### ä¿®æ”¹æ¸¬è©¦è¨­å®š
ç·¨è¼¯ `playwright.config.js` ä¾†èª¿æ•´ï¼š
- ç€è¦½å™¨è¨­å®š
- è¦–çª—å¤§å°
- è¶…æ™‚æ™‚é–“
- é‡è©¦æ¬¡æ•¸

### æ·»åŠ æ–°æ¸¬è©¦
åœ¨ `playwright-test.js` ä¸­æ·»åŠ æ–°çš„æ¸¬è©¦æ¡ˆä¾‹ï¼š

```javascript
// æ¸¬è©¦æ–°åŠŸèƒ½
console.log('\nğŸ“‹ æ¸¬è©¦13: æ–°åŠŸèƒ½æ¸¬è©¦');
await page.click('button:has-text("æ–°åŠŸèƒ½")');
await page.waitForSelector('.new-feature');
console.log('âœ… æ–°åŠŸèƒ½æ­£å¸¸é‹ä½œ');
```

### ç„¡é ­æ¨¡å¼åŸ·è¡Œ
```bash
HEADLESS=true node playwright-test.js
```

## æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. ç«¯å£è¢«ä½”ç”¨
```
âŒ é–‹ç™¼ä¼ºæœå™¨æœªé‹è¡Œ
```
**è§£æ±ºæ–¹æ¡ˆï¼š**
- ç¢ºä¿é–‹ç™¼ä¼ºæœå™¨åœ¨ 3000 ç«¯å£é‹è¡Œ
- æª¢æŸ¥æ˜¯å¦æœ‰å…¶ä»–ç¨‹åºä½”ç”¨ç«¯å£

#### 2. Playwright æœªå®‰è£
```
âŒ Playwright å®‰è£å¤±æ•—
```
**è§£æ±ºæ–¹æ¡ˆï¼š**
```bash
npm install playwright
npx playwright install
```

#### 3. æ¸¬è©¦å…ƒç´ æ‰¾ä¸åˆ°
```
âŒ TimeoutError: locator not found
```
**è§£æ±ºæ–¹æ¡ˆï¼š**
- æª¢æŸ¥æ‡‰ç”¨ç¨‹å¼æ˜¯å¦æ­£ç¢ºè¼‰å…¥
- é©—è­‰å…ƒç´ é¸æ“‡å™¨æ˜¯å¦æ­£ç¢º
- å¢åŠ ç­‰å¾…æ™‚é–“

#### 4. Firebase é€£ç·šå•é¡Œ
```
âš ï¸ Firebaseç™»å…¥å¯èƒ½ä½¿ç”¨é‡å®šå‘æ¨¡å¼
```
**è§£æ±ºæ–¹æ¡ˆï¼š**
- æª¢æŸ¥ Firebase é…ç½®
- ç¢ºèªç¶²è·¯é€£ç·š
- é©—è­‰èªè­‰è¨­å®š

### èª¿è©¦æŠ€å·§

#### 1. å•Ÿç”¨è©³ç´°æ—¥èªŒ
```javascript
// åœ¨æ¸¬è©¦è…³æœ¬ä¸­æ·»åŠ 
await page.setViewportSize({ width: 1920, height: 1080 });
await page.screenshot({ path: 'debug.png' });
console.log(await page.content());
```

#### 2. æ…¢é€ŸåŸ·è¡Œ
```javascript
const browser = await chromium.launch({ 
  headless: false, 
  slowMo: 1000  // æ¯å€‹å‹•ä½œé–“éš”1ç§’
});
```

#### 3. ä¿ç•™ç€è¦½å™¨é–‹å•Ÿ
```javascript
// ç§»é™¤ await browser.close(); 
// è®“ç€è¦½å™¨ä¿æŒé–‹å•Ÿä»¥ä¾¿èª¿è©¦
```

## æŒçºŒæ•´åˆ (CI/CD)

### GitHub Actions ç¯„ä¾‹
```yaml
name: E2E Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: '16'
      - run: npm install
      - run: npx playwright install
      - run: npm start &
      - run: npm run test:headless
```

## æœ€ä½³å¯¦è¸

### 1. æ¸¬è©¦å‰æª¢æŸ¥
- ç¢ºä¿é–‹ç™¼ä¼ºæœå™¨é‹è¡Œ
- æª¢æŸ¥ç¶²è·¯é€£ç·š
- é©—è­‰ Firebase è¨­å®š

### 2. å®šæœŸåŸ·è¡Œ
- æ¯æ¬¡ä»£ç¢¼è®Šæ›´å¾Œ
- éƒ¨ç½²å‰
- æ¯æ—¥è‡ªå‹•æ¸¬è©¦

### 3. æ¸¬è©¦æ•¸æ“šç®¡ç†
- ä½¿ç”¨æ¸¬è©¦å°ˆç”¨æ•¸æ“š
- é¿å…å½±éŸ¿ç”Ÿç”¢æ•¸æ“š
- æ¸…ç†æ¸¬è©¦æ•¸æ“š

### 4. å ±å‘Šåˆ†æ
- å®šæœŸæª¢æŸ¥æ¸¬è©¦å ±å‘Š
- åˆ†æå¤±æ•—åŸå› 
- æ”¹é€²æ¸¬è©¦è¦†è“‹ç‡

## æ”¯æ´èˆ‡è¯çµ¡
å¦‚æœ‰æ¸¬è©¦ç›¸é—œå•é¡Œï¼Œè«‹ï¼š
1. æª¢æŸ¥æœ¬æ–‡ä»¶çš„æ•…éšœæ’é™¤ç« ç¯€
2. æŸ¥çœ‹ `TEST_GUIDE.md` è©³ç´°æŒ‡å—
3. è¯çµ¡é–‹ç™¼åœ˜éšŠ

---

**ç‰ˆæœ¬ï¼š** v1.0  
**æœ€å¾Œæ›´æ–°ï¼š** 2025/01/09  
**ç¶­è­·è€…ï¼š** NiceTone é–‹ç™¼åœ˜éšŠ 